{"ast":null,"code":"import { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport api from \"../apiProvider\";\nexport default function useAuthentication(text, pageType) {\n  const router = useRouter();\n  console.log(\"base url\", process.env.BASE_URL);\n  useEffect(() => {\n    api(\"verifyToken\", \"POST\").then(userVerification => {\n      // console.log(\"userVerification\", userVerification);\n      if (pageType === \"protected\" && (userVerification === null || userVerification === void 0 ? void 0 : userVerification.message) !== \"success\") {\n        router.push({\n          pathname: \"/login\",\n          query: {\n            text: true\n          }\n        });\n      } else {\n        // if logged user opens public page\n        if (pageType === \"public\" && (userVerification === null || userVerification === void 0 ? void 0 : userVerification.message) === \"success\") router.push(\"/\");\n      }\n    });\n  }, []);\n  return true;\n}","map":{"version":3,"sources":["/home/asd/Work/Learning/next-frontend/utils/verifyAuth.js"],"names":["useRouter","useEffect","api","useAuthentication","text","pageType","router","console","log","process","env","BASE_URL","then","userVerification","message","push","pathname","query"],"mappings":"AAAA,SAASA,SAAT,QAA0B,aAA1B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AAEA,eAAe,SAASC,iBAAT,CAA2BC,IAA3B,EAAiCC,QAAjC,EAA2C;AACxD,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AAEAO,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBC,OAAO,CAACC,GAAR,CAAYC,QAApC;AAEAV,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,GAAG,CAAC,aAAD,EAAgB,MAAhB,CAAH,CAA2BU,IAA3B,CAAiCC,gBAAD,IAAsB;AACpD;AACA,UAAIR,QAAQ,KAAK,WAAb,IAA4B,CAAAQ,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,YAAAA,gBAAgB,CAAEC,OAAlB,MAA8B,SAA9D,EAAyE;AACvER,QAAAA,MAAM,CAACS,IAAP,CAAY;AACVC,UAAAA,QAAQ,EAAE,QADA;AAEVC,UAAAA,KAAK,EAAE;AAAEb,YAAAA,IAAI,EAAE;AAAR;AAFG,SAAZ;AAID,OALD,MAKO;AACL;AACA,YAAIC,QAAQ,KAAK,QAAb,IAAyB,CAAAQ,gBAAgB,SAAhB,IAAAA,gBAAgB,WAAhB,YAAAA,gBAAgB,CAAEC,OAAlB,MAA8B,SAA3D,EACER,MAAM,CAACS,IAAP,CAAY,GAAZ;AACH;AACF,KAZD;AAaD,GAdQ,EAcN,EAdM,CAAT;AAgBA,SAAO,IAAP;AACD","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport api from \"../apiProvider\";\n\nexport default function useAuthentication(text, pageType) {\n  const router = useRouter();\n\n  console.log(\"base url\", process.env.BASE_URL);\n\n  useEffect(() => {\n    api(\"verifyToken\", \"POST\").then((userVerification) => {\n      // console.log(\"userVerification\", userVerification);\n      if (pageType === \"protected\" && userVerification?.message !== \"success\") {\n        router.push({\n          pathname: \"/login\",\n          query: { text: true },\n        });\n      } else {\n        // if logged user opens public page\n        if (pageType === \"public\" && userVerification?.message === \"success\")\n          router.push(\"/\");\n      }\n    });\n  }, []);\n\n  return true;\n}"]},"metadata":{},"sourceType":"module"}